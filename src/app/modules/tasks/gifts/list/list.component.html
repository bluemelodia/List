<app-heading [level]="headerLevel.H1" 
	[text]="header">
</app-heading>
<section class="task-list__selectors">
	<app-sort-select [list]="giftSortOptions"
		(onSortSelected)="onSortSelected($event)">
	</app-sort-select>
	<app-recipient-filter [list]="recipients"
		(onFilterReset)="resetRecipientFilter()"
		(onRecipientSelect)="filterByRecipient($event)">
	</app-recipient-filter>
</section>

<section *ngIf="list$ | async as list" class="task-list__scrollable-container hide-scrollbar">
	<section *ngIf="list && list.length > 0">
		<section class="task-list__scrollable-list">
			<ul class="task-list">
				<li *ngFor="let gift of list"
					class="task-list__item">
					<ng-container [ngTemplateOutlet]="giftList" 
						[ngTemplateOutletContext]="{ 'gift': gift }">
					</ng-container>   
				</li>
			</ul>
		</section>	
	</section>
	<section *ngIf="list && list.length === 0"
		class="no-results flex-centered__column">
    <app-no-items [config]="noItemsConfig"></app-no-items>
</section>
</section>

<ng-template #giftList let-gift="gift">
	<section class="task-list__item-info form-container flex-centered__column flex-stretch">
		<app-heading [level]="headerLevel.H2"
			[text]="gift.recipient?.name">
			<section post class="actions edit-actions">
				<app-action ariaLabel="Edit"
					[enabled]="true"
					[icon]="icon.Edit"
					(actionSelected)="editGift(gift)">
				</app-action>
				<app-action ariaLabel="Delete"
					[enabled]="true"
					[icon]="icon.Delete"
					(actionSelected)="onDeleteClicked(recipient.uuid)">
				</app-action>
			</section>
		</app-heading>
		<p class="task-details__wrapper">
			<span class="task-details__label">{{ gift.occasion }} - {{ gift.year }}</span>
			<span class="task-details__description">${{ gift.price || 0 }}</span>
		</p>
		<p *ngIf="gift.description" 
			class="task-details__wrapper">
			<span class="task-details__description">{{ gift.description }}</span>
		</p>
	</section>
	<section class="task-list__photo-container">
		<img *ngIf="gift.image"
			class="task-list__item-photo"
			src="{{ base64Prefix }}{{ gift.image }}"/>
		<img *ngIf="!gift.image"
			class="task-list__item-photo"
			src="./assets/images/gift.png"/>
	</section>
</ng-template>